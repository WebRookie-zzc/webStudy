# es20XX

## es2017 (es8)

æ­¤ç¬”è®°æ˜¯æ ¹æ®ä¸€ç¯‡[CHå‰ç«¯ç¤¾åŒº](https://www.chinahtml.com/articles/28/)çš„æ–‡ç« è¿›è¡Œå­¦ä¹ æ•´ç†çš„

### å­—ç¬¦ä¸²å¡«å……

> ES8 å¢åŠ äº†ä¸¤ä¸ªæ–°çš„å‡½æ•°ï¼š padStart å’Œ padEnd ã€‚æ­£å¦‚å…¶åï¼Œè¿™ä¿©å‡½æ•°çš„ä½œç”¨å°±æ˜¯åœ¨å­—ç¬¦ä¸²çš„å¤´éƒ¨å’Œå°¾éƒ¨å¢åŠ æ–°çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå…·æœ‰æŒ‡å®šé•¿åº¦çš„æ–°çš„å­—ç¬¦ä¸²

ä»£ç è¯­æ³• ï¼š

```js
str.padStart(targetLength [, padString])

str.padEnd(targetLength [, padString])
```

> ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡çš„æ˜¯è®¾å®šè¿™ä¿©å‡½æ•°æœ€åè¿”å›çš„å­—ç¬¦ä¸²çš„é•¿åº¦

å¦‚æœä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ¯”åŸæ¥çš„å­—ç¬¦ä¸²çš„é•¿åº¦è¿˜è¦å°ï¼Œé‚£ä¹ˆä¸ä¼šå¡«å……è¿›å»ï¼ŒåŸå­—ç¬¦ä¸²ä¸ä¼šå‘ç”Ÿä»»ä½•æ”¹å˜

> ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰å‚æ•°ï¼Œä»£è¡¨ä½ æƒ³è¦å¡«å……çš„å†…å®¹ï¼Œé»˜è®¤å€¼æ˜¯ç©ºæ ¼ã€‚

å¦‚æœç¬¬äºŒä¸ªå‚æ•°éå¸¸é•¿ï¼Œå½“å¡«å……è¿›å»ä»¥åï¼Œè¶…è¿‡äº†å¡«å……åçš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°å€¼ï¼‰ï¼Œé‚£ä¹ˆï¼Œç¬¬äºŒä¸ªå‚æ•°å€¼å°±ä¼šè¢«åˆ‡å‰²ï¼Œå–å‰é¢çš„éƒ¨åˆ†å»å¡«å……

å…·ä½“ä»£ç ç¤ºä¾‹ï¼š

```js
'es8'.padStart(2);          // 'es8'
'es8'.padStart(5);          // '  es8'
'es8'.padStart(6, 'woof');  // 'wooes8'
'es8'.padStart(14, 'wow');  // 'wowwowwowwoes8'
'es8'.padStart(7, '0');     // '0000es8'

'es8'.padEnd(2);          // 'es8'
'es8'.padEnd(5);          // 'es8  '
'es8'.padEnd(6, 'woof');  // 'es8woo'
'es8'.padEnd(14, 'wow');  // 'es8wowwowwowwo'
'es8'.padEnd(7, '6');     // 'es86666'
```

### valueså’Œentrieså‡½æ•°

åœ¨ Object ä¸­ï¼ŒES8 ä¹Ÿæ–°å¢äº†ä¸¤ä¸ªæ–°çš„å‡½æ•°ï¼Œåˆ†åˆ«æ˜¯ Object.values å‡½æ•°å’Œ ```Object.entries``` å‡½æ•°ã€‚Object.values å‡½æ•°å°†ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„å†…å®¹æ˜¯å‡½æ•°å‚æ•°ï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å¯éå†å±æ€§çš„å±æ€§å€¼ã€‚æ•°ç»„ä¸­å¾—åˆ°çš„å±æ€§å€¼çš„é¡ºåºä¸ä½ åœ¨å¯¹å‚æ•°å¯¹è±¡ä½¿ç”¨ for in è¯­å¥æ—¶è·å–åˆ°çš„å±æ€§å€¼çš„é¡ºåºä¸€è‡´ã€‚

ä»£ç è¯­æ³•ï¼š

```js
Object.values(obj);
```

å‚æ•° obj å°±æ˜¯æºå¯¹è±¡ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…ä¸€ä¸ªæ•°ç»„ï¼ˆå› ä¸ºæ•°ç»„å¯ä»¥çœ‹ä½œæ˜¯æ•°ç»„ä¸‹æ ‡ä¸º key ï¼Œæ•°ç»„å…ƒç´ ä¸º value çš„ç‰¹æ®Šå¯¹è±¡ï¼‰ã€‚

å½“æˆ‘ä»¬ç”¨æ•°å­—ä½œä¸ºé”®çš„æ—¶å€™ï¼Œè¾“å‡ºæ•°ç»„çš„é¡ºåºå°±ä¼šæŒ‰ç…§æ•°å­—é”®çš„å¤§å°æ’åº --ã€‹ ç¬¬68è¡Œ

ä¼ å…¥å­—ç¬¦ä¸²ï¼Œä¼šå°†å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦æ‹†åˆ†æˆå­—ç¬¦æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ --ã€‹ ç¬¬72è¡Œ

å…·ä½“ä»£ç ç¤ºä¾‹ï¼š

```js
const obj = { x: 'xxx', y: 1 };
Object.values(obj); // ['xxx', 1]

const obj = ['e', 's', '8']; // same as { 0: 'e', 1: 's', 2: '8' };
Object.values(obj); // ['e', 's', '8']

// when we use numeric keys, the values returned in a numerical
// order according to the keys
const obj = { 10: 'xxx', 1: 'yyy', 3: 'zzz' };
Object.values(obj); // ['yyy', 'zzz', 'xxx']
Object.values('es8'); // ['e', 's', '8']
```

```Object.entries``` å‡½æ•°ä¸ ```Object.values``` å‡½æ•°ç±»ä¼¼ï¼Œä¹Ÿæ˜¯è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œåªä¸è¿‡è¿™ä¸ªæ•°ç»„æ˜¯ä¸€ä¸ªä»¥æºå¯¹è±¡ï¼ˆå‚æ•°ï¼‰çš„å¯æšä¸¾å±æ€§çš„é”®å€¼å¯¹ä¸ºæ•°ç»„ [key, value] çš„ n è¡Œ 2 åˆ—çš„æ•°ç»„ã€‚å®ƒçš„è¿”å›é¡ºåºä¸ ```Object.values``` å‡½æ•°ç±»ä¼¼ã€‚

ä»£ç è¯­æ³•:

```js
Object.entries(obj);
```

æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²ï¼Œä¼šè¢«æ·»åŠ ä¸Šä»0å¼€å§‹çš„ç´¢å¼•

å…·ä½“ä»£ç ç¤ºä¾‹:

```js
const obj = { x: 'xxx', y: 1 };
Object.entries(obj); // [['x', 'xxx'], ['y', 1]]

const obj = ['e', 's', '8'];
Object.entries(obj); // [['0', 'e'], ['1', 's'], ['2', '8']]

const obj = { 10: 'xxx', 1: 'yyy', 3: 'zzz' };
Object.entries(obj); // [['1', 'yyy'], ['3', 'zzz'], ['10': 'xxx']]
Object.entries('es8'); // [['0', 'e'], ['1', 's'], ['2', '8']]
```

### getOwnPropertyDescriptorså‡½æ•°

Object ä¸­è¿˜æœ‰ä¸€ä¸ªæ–°æˆå‘˜ï¼Œé‚£å°±æ˜¯ ```Object.getOwnPropertyDescriptors``` å‡½æ•°ã€‚è¯¥å‡½æ•°è¿”å›æŒ‡å®šå¯¹è±¡ï¼ˆå‚æ•°ï¼‰çš„æ‰€æœ‰è‡ªèº«å±æ€§æè¿°ç¬¦ã€‚æ‰€è°“è‡ªèº«å±æ€§æè¿°ç¬¦å°±æ˜¯åœ¨å¯¹è±¡è‡ªèº«å†…å®šä¹‰ï¼Œä¸æ˜¯é€šè¿‡åŸå‹é“¾ç»§æ‰¿æ¥çš„å±æ€§

ä»£ç è¯­æ³•ï¼š

```js
Object.getOwnPropertyDescriptors(obj);
```

å…·ä½“ä»£ç ç¤ºä¾‹ï¼š

```js
var obj = {
    firstName : 'Adrien',
    conNum () {
        console.log(1);
    }
}

var res = Object.getOwnPropertyDescriptor(obj);
console.log(obj);

/*
{firstName: "Adrien", conNum: Æ’}
*/
```

### ç»“å°¾é€—å·

æ­¤å¤„ç»“å°¾é€—å·æŒ‡çš„æ˜¯åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­æœ€åä¸€ä¸ªå‚æ•°ä¹‹åçš„é€—å·ä»¥åŠå‡½æ•°è°ƒç”¨æ—¶æœ€åä¸€ä¸ªå‚æ•°ä¹‹åçš„é€—å·ã€‚ES8 å…è®¸åœ¨å‡½æ•°å®šä¹‰æˆ–è€…å‡½æ•°è°ƒç”¨æ—¶ï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¹‹åå­˜åœ¨ä¸€ä¸ªç»“å°¾é€—å·è€Œä¸æŠ¥ SyntaxError çš„é”™è¯¯ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```js
//å‡½æ•°å®šä¹‰
function es8(var1, var2, var3,) {
  // ...
}
//å‡½æ•°æ‰§è¡Œ
es8(10, 20, 30,);
```

### å¼‚æ­¥å‡½æ•°

ç”± async å…³é”®å­—å®šä¹‰çš„å‡½æ•°å£°æ˜å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ª AsyncFunction ç±»å‹çš„å¯¹è±¡ã€‚å¼‚æ­¥å‡½æ•°çš„å†…åœ¨è¿è¡Œæœºåˆ¶å’Œ Generator å‡½æ•°éå¸¸ç±»ä¼¼ï¼Œä½†æ˜¯ä¸èƒ½è½¬åŒ–ä¸º Generator å‡½æ•°ã€‚

å…·ä½“ç¤ºä¾‹ä»£ç ï¼š

```js
function fetchTextByPromise() {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve("es8");
    }, 2000);
  });
}
async function sayHello() {
  const externalFetchedText = await fetchTextByPromise();
  console.log(`Hello, ${externalFetchedText}`); // Hello, es8
}
sayHello();
1 // immediately
2 // immediately
Hello, es8 // after 2 seconds
```

### æ ‡ç­¾å‡½æ•°ï¼ˆè¿™ä¸ªåº”è¯¥æ˜¯å’Œæ¨¡æ¿å­—ç¬¦ä¸²ä¸€èµ·å‡ºæ¥çš„ï¼‰ åº”è¯¥æ˜¯es2016

> æ ‡ç­¾å‡½æ•°çš„è¯­æ³•æ˜¯å‡½æ•°ååé¢ç›´æ¥å¸¦ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå¹¶ä»æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„æ’å€¼è¡¨è¾¾å¼ä¸­è·å–å‚æ•°
> æ ‡ç­¾å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¢«åµŒå…¥è¡¨è¾¾å¼åˆ†éš”çš„æ–‡æœ¬çš„æ•°ç»„ã€‚ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹æ˜¯åµŒå…¥è¡¨è¾¾å¼çš„å†…å®¹ã€‚

çœ‹ä¸€ä¸ªä¾‹å­æ¥ç†è§£

```js
function greet(arg1, arg2, arg3){
  console.log(arg1);
  console.log(arg2);
  console.log(arg3);
}

// æ™®é€šå‡½æ•°
greet(["I'm ", ". I'm ", " years old."], name, age)

// tag å‡½æ•°
greet`I'm ${name}. I'm ${age} years old.`ã€

// æœ€ç»ˆè¾“å‡º
[ 'I\'m ', '. I\'m ', ' years old.' ]
Alfred
47
```

```js
function cook(strs, ...substs) {
    return substs.reduce(
        (prev,cur,i) => prev+cur+strs[i+1],
        strs[0]
    );
}

function repeat(times) {
    return function (...args) {
        return cook(...args).repeat(times);
    };
}

// è¿è¡Œç»“æœ
> repeat(3)`abc`
'abcabcabc'
> repeat(3)`abc${3+1}`
'abc4abc4abc4'
```

### å…±äº«å†…å­˜ä¸åŸå­æ“ä½œ(è¿™é‡Œæˆ‘æ²¡ææ˜ç™½)

å½“å†…å­˜è¢«å…±äº«æ—¶ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å¹¶å‘è¯»ã€å†™å†…å­˜ä¸­ç›¸åŒçš„æ•°æ®ã€‚åŸå­æ“ä½œå¯ä»¥ç¡®ä¿é‚£äº›è¢«è¯»ã€å†™çš„å€¼éƒ½æ˜¯å¯é¢„æœŸçš„ï¼Œå³æ–°çš„äº‹åŠ¡æ˜¯åœ¨æ—§çš„äº‹åŠ¡ç»“æŸä¹‹åå¯åŠ¨çš„ï¼Œæ—§çš„äº‹åŠ¡åœ¨ç»“æŸä¹‹å‰å¹¶ä¸ä¼šè¢«ä¸­æ–­ã€‚è¿™éƒ¨åˆ†ä¸»è¦ä»‹ç»äº† ES8 ä¸­æ–°çš„æ„é€ å‡½æ•° SharedArrayBuffer ä»¥åŠæ‹¥æœ‰è®¸å¤šé™æ€æ–¹æ³•çš„å‘½åç©ºé—´å¯¹è±¡ Atomic ã€‚

Atomic å¯¹è±¡ç±»ä¼¼äº Math å¯¹è±¡ï¼Œæ‹¥æœ‰è®¸å¤šé™æ€æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½æŠŠå®ƒå½“åšæ„é€ å‡½æ•°ã€‚ Atomic å¯¹è±¡æœ‰å¦‚ä¸‹å¸¸ç”¨çš„é™æ€æ–¹æ³•ï¼š

add /sub - ä¸ºæŸä¸ªæŒ‡å®šçš„valueå€¼åœ¨æŸä¸ªç‰¹å®šçš„ä½ç½®å¢åŠ æˆ–è€…å‡å»æŸä¸ªå€¼
and / or /xor - è¿›è¡Œä½æ“ä½œ
load - è·å–ç‰¹å®šä½ç½®çš„å€¼

## es2018 ï¼ˆES9ï¼‰

æ ¹æ®ä¸€ç¯‡[æ˜é‡‘](https://juejin.im/post/6844903622870827022)çš„æ–‡ç« è¿›è¡Œå­¦ä¹ çš„

### å¼‚æ­¥è¿­ä»£

åœ¨åŒæ­¥å¾ªç¯ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œä¸ä¼šæ­£å¸¸æ‰§è¡Œï¼Œå¾ªç¯æœ¬èº«ä¾æ—§ä¿æŒåŒæ­¥ï¼Œå¹¶åœ¨åœ¨å†…éƒ¨å¼‚æ­¥å‡½æ•°ä¹‹å‰å…¨éƒ¨è°ƒç”¨å®Œæˆã€‚

ä¸‹é¢æ˜¯ä¸¤ä¸ªé”™è¯¯çš„ä»£ç 

```js
async function process(array) {
  for (let i of array) {
    await doSomething(i);
  }
}
```

```js
async function process(array) {
  array.forEach(async i => {
    await doSomething(i);
  });
}
```

ES2018å¼•å…¥å¼‚æ­¥è¿­ä»£å™¨ï¼ˆasynchronous iteratorsï¼‰ï¼Œè¿™å°±åƒå¸¸è§„è¿­ä»£å™¨ï¼Œé™¤äº†next()æ–¹æ³•è¿”å›ä¸€ä¸ªPromiseã€‚å› æ­¤awaitå¯ä»¥å’Œfor...ofå¾ªç¯ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ä¸²è¡Œçš„æ–¹å¼è¿è¡Œå¼‚æ­¥æ“ä½œã€‚

ä¾‹å¦‚ï¼š

```js
async function process(array) {
  for await (let i of array) {
    doSomething(i);
  }
}
```

### Promise.finally()

ä¸€ä¸ªPromiseè°ƒç”¨é“¾è¦ä¹ˆæˆåŠŸåˆ°è¾¾æœ€åä¸€ä¸ª.then()ï¼Œè¦ä¹ˆå¤±è´¥è§¦å‘.catch()ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ æƒ³è¦åœ¨æ— è®ºPromiseè¿è¡ŒæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œè¿è¡Œç›¸åŒçš„ä»£ç ï¼Œä¾‹å¦‚æ¸…é™¤ï¼Œåˆ é™¤å¯¹è¯ï¼Œå…³é—­æ•°æ®åº“è¿æ¥ç­‰ã€‚

å…·ä½“å®ä¾‹ï¼š

```js
function doSomething() {
  doSomething1()
  .then(doSomething2)
  .then(doSomething3)
  .catch(err => {
    console.log(err);
  })
  .finally(() => {
    // finish here!
  });
}
```

### Rest/Spread å±æ€§

æ—©åœ¨ES2015å°±å¼•å…¥äº†Restå‚æ•°å’Œæ‰©å±•è¿ç®—ç¬¦ã€‚ä¸‰ä¸ªç‚¹ï¼ˆ...ï¼‰ä»…ç”¨äºæ•°ç»„ã€‚Restå‚æ•°è¯­æ³•å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªä¸å®šæ•°é‡çš„å‚æ•°è¡¨ç¤ºä¸ºä¸€ä¸ªæ•°ç»„ã€‚

å®ä¾‹ï¼š

```js
restParam(1, 2, 3, 4, 5);

function restParam(p1, p2, ...p3) {
  // p1 = 1
  // p2 = 2
  // p3 = [3, 4, 5]
}
```

å±•å¼€æ“ä½œç¬¦ä»¥ç›¸åçš„æ–¹å¼å·¥ä½œï¼Œå°†æ•°ç»„è½¬æ¢æˆå¯ä¼ é€’ç»™å‡½æ•°çš„å•ç‹¬å‚æ•°ã€‚

```js
const values = [99, 100, -1, 48, 16];
console.log( Math.max(...values) ); // 100
```

ES2018ä¸ºå¯¹è±¡è§£æ„æä¾›äº†å’Œæ•°ç»„ä¸€æ ·çš„Restå‚æ•°ï¼ˆï¼‰å’Œå±•å¼€æ“ä½œç¬¦

ä¸€ä¸ªç®€å•çš„ä¾‹å­

```js
const myObject = {
  a: 1,
  b: 2,
  c: 3
};

const { a, ...x } = myObject;
// a = 1
// x = { b: 2, c: 3 }
```

æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨å®ƒç»™å‡½æ•°ä¼ é€’å‚æ•°ï¼š

```js
restParam({
  a: 1,
  b: 2,
  c: 3
});

function restParam({ a, ...x }) {
  // a = 1
  // x = { b: 2, c: 3 }
}
```

è·Ÿæ•°ç»„ä¸€æ ·ï¼ŒRestå‚æ•°åªèƒ½åœ¨å£°æ˜çš„ç»“å°¾å¤„ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œå®ƒåªé€‚ç”¨äºæ¯ä¸ªå¯¹è±¡çš„é¡¶å±‚ï¼Œå¦‚æœå¯¹è±¡ä¸­åµŒå¥—å¯¹è±¡åˆ™æ— æ³•é€‚ç”¨

æ‰©å±•è¿ç®—ç¬¦å¯ä»¥åœ¨å…¶ä»–å¯¹è±¡å†…ä½¿ç”¨

```js
const obj1 = { a: 1, b: 2, c: 3 };
const obj2 = { ...obj1, z: 26 };
// obj2 is { a: 1, b: 2, c: 3, z: 26 }
```

ç”¨æ‹“å±•è¿ç®—ç¬¦æ¥å…‹éš†æ•°ç»„æˆ–è€…æ˜¯å¯¹è±¡ï¼Œå½“é‡Œé¢çš„å€¼å…¨éƒ¨æ˜¯åŸºæœ¬ç±»å‹æ—¶ï¼Œä»–æ˜¯æ·±å…‹éš†ï¼Œå½“é‡Œé¢çš„å€¼æœ‰éåŸºæœ¬ç±»å‹çš„å€¼ï¼Œä»–å…‹éš†çš„æ˜¯é‡Œé¢çš„åœ°å€

```js
let arr1 = [1,2,3];
let arr2 = [...arr1];
arr1.push(3);
console.log(arr1, arr2);//[ 1, 2, 3, 3 ] [ 1, 2, 3 ]
```

```js
let arr1 = [1,2,[1,2,3]];

let arr2 = [...arr1];

arr1[2].push(3);

console.log(arr1, arr2); //[ 1, 2, [ 1, 2, 3, 3 ] ] [ 1, 2, [ 1, 2, 3, 3 ] ]
```

å½“ç„¶å¯¹è±¡ä¹Ÿæ˜¯ç›¸åŒçš„é“ç†

### ä¸‹é¢æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„æ–°å¢å†…å®¹

#### æ­£åˆ™è¡¨è¾¾å¼å‘½åæ•è·ç»„ï¼ˆRegular Expression Named Capture Groupsï¼‰

åœ¨ä¹‹å‰ï¼šJavaScriptæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥è¿”å›ä¸€ä¸ªåŒ¹é…çš„å¯¹è±¡â€”â€”ä¸€ä¸ªåŒ…å«åŒ¹é…å­—ç¬¦ä¸²çš„ç±»æ•°ç»„ï¼Œä¾‹å¦‚ï¼šä»¥YYYY-MM-DDçš„æ ¼å¼è§£ææ—¥æœŸï¼š

```js
const
  reDate = /([0-9]{4})-([0-9]{2})-([0-9]{2})/,
  match  = reDate.exec('2018-04-30'),
  year   = match[1], // 2018
  month  = match[2], // 04
  day    = match[3]; // 30
```

è¿™æ ·çš„ä»£ç å¾ˆéš¾è¯»æ‡‚ï¼Œå¹¶ä¸”æ”¹å˜æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æ„æœ‰å¯èƒ½æ”¹å˜åŒ¹é…å¯¹è±¡çš„ç´¢å¼•ã€‚

ES2018å…è®¸å‘½åæ•è·ç»„ä½¿ç”¨ç¬¦å·```?<name>```ï¼Œåœ¨æ‰“å¼€æ•è·æ‹¬å·(åç«‹å³å‘½å)ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š

```js
const
  reDate = /(?<year>[0-9]{4})-(?<month>[0-9]{2})-(?<day>[0-9]{2})/,
  match  = reDate.exec('2018-04-30'),
  year   = match.groups.year,  // 2018
  month  = match.groups.month, // 04
  day    = match.groups.day;   // 30
```

match æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªgroups å±æ€§ï¼Œ è¿™ä¸ªå±æ€§ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢å°±å­˜å‚¨ç€æˆ‘ä»¬åœ¨repä¸­å®šä¹‰çš„åå­—

ä»»ä½•åŒ¹é…å¤±è´¥çš„å‘½åç»„éƒ½å°†è¿”å›undefinedã€‚

å‘½åæ•è·ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨replace()æ–¹æ³•ä¸­ã€‚ä¾‹å¦‚å°†æ—¥æœŸè½¬æ¢ä¸ºç¾å›½çš„ MM-DD-YYYY æ ¼å¼ï¼š

```js
const
  reDate = /(?<year>[0-9]{4})-(?<month>[0-9]{2})-(?<day>[0-9]{2})/,
  d      = '2018-04-30',
  usDate = d.replace(reDate, '$<month>-$<day>-$<year>');
//æ›¿æ¢çš„æ—¶å€™ç”¨çš„å°±æ˜¯  ```$<name>```
```

#### æ­£åˆ™è¡¨è¾¾å¼åå‘æ–­è¨€ï¼ˆlookbehindï¼‰ ?? --> æ²¡çœ‹æ‡‚

ç›®å‰JavaScriptåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æ”¯æŒå…ˆè¡Œæ–­è¨€ï¼ˆlookaheadï¼‰ã€‚è¿™æ„å‘³ç€åŒ¹é…ä¼šå‘ç”Ÿï¼Œä½†ä¸ä¼šæœ‰ä»»ä½•æ•è·ï¼Œå¹¶ä¸”æ–­è¨€æ²¡æœ‰åŒ…å«åœ¨æ•´ä¸ªåŒ¹é…å­—æ®µä¸­ã€‚ä¾‹å¦‚ä»ä»·æ ¼ä¸­æ•è·è´§å¸ç¬¦å·ï¼š

```js
const
  reLookahead = /\D(?=\d+)/,
  match       = reLookahead.exec('$123.89');
  console.log( match[0] ); // $
```

ES2018å¼•å…¥ä»¥ç›¸åŒæ–¹å¼å·¥ä½œä½†æ˜¯åŒ¹é…å‰é¢çš„åå‘æ–­è¨€ï¼ˆlookbehindï¼‰ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥å¿½ç•¥è´§å¸ç¬¦å·ï¼Œå•çº¯çš„æ•è·ä»·æ ¼çš„æ•°å­—ï¼š

```js
const
  reLookbehind = /(?<=\D)\d+/,
  match        = reLookbehind.exec('$123.89');

console.log( match[0] ); // 123.89
```

ä»¥ä¸Šæ˜¯ è‚¯å®šåå‘æ–­è¨€ï¼Œéæ•°å­—\Då¿…é¡»å­˜åœ¨ã€‚åŒæ ·çš„ï¼Œè¿˜å­˜åœ¨ å¦å®šåå‘æ–­è¨€ï¼Œè¡¨ç¤ºä¸€ä¸ªå€¼å¿…é¡»ä¸å­˜åœ¨ï¼Œä¾‹å¦‚ï¼š

```js
const
  reLookbehindNeg = /(?<!\D)\d+/,
  match           = reLookbehind.exec('$123.89');

console.log( match[0] ); // null
```

#### æ­£åˆ™è¡¨è¾¾å¼ ```dotAll``` æ¨¡å¼

æ­£åˆ™è¡¨è¾¾å¼ä¸­ç‚¹.åŒ¹é…é™¤å›è½¦å¤–çš„ä»»ä½•å•å­—ç¬¦ï¼Œæ ‡è®°sæ”¹å˜è¿™ç§è¡Œä¸ºï¼Œå…è®¸è¡Œç»ˆæ­¢ç¬¦çš„å‡ºç°ï¼Œ

ä¾‹å¦‚ ï¼š

```js
/hello.world/.test('hello\nworld');  // false
/hello.world/s.test('hello\nworld'); // true
```

#### æ­£åˆ™è¡¨è¾¾å¼ Unicode è½¬ä¹‰

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ¬åœ°è®¿é—® Unicode å­—ç¬¦å±æ€§æ˜¯ä¸è¢«å…è®¸çš„ã€‚ES2018æ·»åŠ äº† Unicode å±æ€§è½¬ä¹‰â€”â€”å½¢å¼ä¸º\p{...}å’Œ\P{...}ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ ‡è®° u (unicode) è®¾ç½®ï¼Œåœ¨\på—å„¿å†…ï¼Œå¯ä»¥ä»¥é”®å€¼å¯¹çš„æ–¹å¼è®¾ç½®éœ€è¦åŒ¹é…çš„å±æ€§è€Œéå…·ä½“å†…å®¹ã€‚

```js
const reGreekSymbol = /\p{Script=Greek}/u;
reGreekSymbol.test('Ï€'); // true
```

#### éè½¬ä¹‰åºåˆ—çš„æ¨¡æ¿å­—ç¬¦ä¸²

æœ€åï¼ŒES2018 ç§»é™¤å¯¹ ECMAScript åœ¨å¸¦æ ‡ç­¾çš„æ¨¡ç‰ˆå­—ç¬¦ä¸²ä¸­è½¬ä¹‰åºåˆ—çš„è¯­æ³•é™åˆ¶ã€‚
ä¹‹å‰ï¼Œ\uå¼€å§‹ä¸€ä¸ª unicode è½¬ä¹‰ï¼Œ\xå¼€å§‹ä¸€ä¸ªåå…­è¿›åˆ¶è½¬ä¹‰ï¼Œ\åè·Ÿä¸€ä¸ªæ•°å­—å¼€å§‹ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰ã€‚è¿™ä½¿å¾—åˆ›å»ºç‰¹å®šçš„å­—ç¬¦ä¸²å˜å¾—ä¸å¯èƒ½ï¼Œä¾‹å¦‚Windowsæ–‡ä»¶è·¯å¾„ C:\uuu\xxx\111ã€‚æ›´å¤šç»†èŠ‚å‚è€ƒæ¨¡æ¿å­—ç¬¦ä¸²ã€‚

## ES2019 (ES10)

æœ¬ç¬”è®°æ˜¯æ ¹æ®[é¢†è‹±](https://blog.tildeloop.com/posts/javascript-what%E2%80%99s-new-in-es2019)å’Œ[ç®€ä¹¦](https://www.jianshu.com/p/fc43865811d5)çš„æ–‡ç« è¿›è¡Œæ•´ç†å­¦ä¹ çš„

### String.prototype.trimStart() / String.prototype.trimEnd()

åœ¨æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæŠŠå¤´å°¾çš„ç©ºæ ¼æ–‡æœ¬å»æ‰ï¼Œæ¥è§„é¿å±•ç¤ºçš„ä¸å—æ§æƒ…å†µã€‚è‡ªES5æ¥ï¼Œ```String.prototype.trim()``` è¢«ç”¨äºå»é™¤å¤´å°¾ä¸Šçš„ç©ºæ ¼ã€æ¢è¡Œç¬¦ç­‰ï¼Œç°åœ¨é€šè¿‡```trimStart()``` ï¼Œ```trimEnd()```æ¥å¤´å’Œå°¾è¿›è¡Œå•ç‹¬æ§åˆ¶ã€‚```trimLeft()```ã€```trimRight()```æ˜¯ä»–ä»¬çš„åˆ«åã€‚

```js
const string = ' Hello ES2019! ';
string.trimStart();
// 'Hello ES2019! '
string.trimEnd();
// ' Hello ES2019!'
```

### Object.fromEntries()

ES8ä¸ºæˆ‘ä»¬å¼•å…¥äº† ```Object.entries``` æŠŠä¸€ä¸ªå¯¹è±¡è½¬ä¸º ```[key, value]```é”®å€¼å¯¹çš„å½¢å¼ï¼Œå¯ä»¥è¿ç”¨äºåƒ Map è¿™ç§ç»“æ„ä¸­ã€‚å‡¡äº‹æœ‰æ¥æœ‰å›ï¼Œ```Object.fromEntries()``` ç”¨äºæŠŠé”®å€¼å¯¹è¿˜åŸæˆå¯¹è±¡ç»“æ„ã€‚

```js
let obj = {
  a : 1,
  b : 2,
  c : 3
}

for (let item of Object.entries(obj)) {
  console.log(item);
}

/**
[ 'a', 1 ]
[ 'b', 2 ]
[ 'c', 3 ]
 */
```

```js
let arr = [['foo', 'bar'], ['name', 'Oscar Hills']];
let obj = Object.fromEntries((arr));
console.log(obj);
//{ foo: 'bar', name: 'Oscar Hills' }
```

### Array.prototype.flat() / Array.prototype.flatMap()

æŠŠæ•°ç»„å±•å¹³æ˜¯ArrayåŸå‹ç»™æˆ‘ä»¬å¸¦æ¥çš„æ–°ç‰¹æ€§ï¼Œé€šè¿‡ä¼ å…¥å±‚çº§æ·±åº¦å‚æ•°ï¼ˆé»˜è®¤ä¸º1ï¼‰ï¼Œæ¥ä¸ºä¸‹å±‚æ•°ç»„æå‡å±‚çº§ã€‚å¦‚æœæƒ³æå‡æ‰€æœ‰å±‚çº§å¯ä»¥å†™ä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ•°å­—ç”šè‡³æ˜¯Infinityï¼Œå½“ç„¶ä¸æ¨èè¿™ä¹ˆåšã€‚

ä»£ç å®ä¾‹ ï¼š

```js
[1, 2, [3, 4]].flat();
// [ 1, 2, 3, 4 ]
[1, 2, [3, 4, [5, 6]]].flat(2);
// [ 1, 2, 3, 4, 5, 6 ]
[1, 2, [3, 4, [5, 6]]].flat(1);
[1,2,3,4,[5,6]];
```

```Array.prototype.flatMap()``` å®ƒæ˜¯ ```Array.prototype.map()``` å’Œ ```Array.prototype.flat()``` çš„ç»„åˆï¼Œé€šè¿‡å¯¹mapè°ƒæ•´åçš„æ•°æ®å°è¯•å±•å¹³æ“ä½œã€‚

```js
[1, 2, [3, 4]].flatMap(v => {
  if (typeof v === 'number') {
    return v * 2
  } else {
    return v.map(v => v * 2)
  }
})
// [2, 4, 6, 8]
```

### catch çš„å‚æ•°æ”¹ä¸ºå¯é€‰

åœ¨è¿›è¡Œtry...catché”™è¯¯å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰ç»™catchä¼ å‚æ•°çš„è¯ï¼Œä»£ç å°±ä¼šæŠ¥é”™ã€‚æœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸å…³å¿ƒé”™è¯¯æƒ…å†µ

å¦‚ï¼š

```javascript
const isValidJSON = json => {
  try {
    JSON.parse(json);
    return true;
  } catch (unusedError) {
    // Unused error parameter
    return false;
  }
};
```

åœ¨æ–°è§„èŒƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥catchç»‘å®šçš„å‚æ•°å’Œæ‹¬å·:

```js
const isValidJSON = json => {
  try {
    JSON.parse(json);
    return true;
  } catch {
    return false;
  }
};
```

### Symbol.description

```Symbol```æ˜¯ES6ä¸­å¼•å…¥çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨ä½œå¯¹è±¡å±æ€§çš„æ ‡è¯†ç¬¦ã€‚æè¿°å±æ€§æ˜¯åªè¯»çš„ï¼Œå¯ç”¨äºè·å–ç¬¦å·å¯¹è±¡çš„æè¿°ï¼Œæ›´å¥½äº†è§£å®ƒçš„ä½œç”¨ã€‚
å®ƒè¿”å›çš„æ˜¯å­—ç¬¦ä¸²

æˆ‘ä»¬ç”¨ ```symbol.description()``` æ¥è·å–é‡Œé¢çš„å†…å®¹

```js
let sym = Symbol('foo');
console.log(typeof sym, sym);
let symD = sym.description;
console.log(typeof symD, symD);

/**
 *  symbol Symbol(foo)
    string foo
 */
```

### JSON Superset è¶…é›†

ä¹‹å‰å¦‚æœJSONå­—ç¬¦ä¸²ä¸­åŒ…å«æœ‰è¡Œåˆ†éš”ç¬¦(\u2028) å’Œæ®µè½åˆ†éš”ç¬¦(\u2029)ï¼Œé‚£ä¹ˆåœ¨è§£æè¿‡ç¨‹ä¸­ä¼šæŠ¥é”™ã€‚

```js
JSON.parse('"\u2028"');
// SyntaxError
```

ç°åœ¨ES2019å¯¹å®ƒä»¬æä¾›äº†æ”¯æŒã€‚

```js
JSON.parse('"\u2028"');
// ''
```

### JSON.stringify() åŠ å¼ºæ ¼å¼è½¬åŒ–

æˆ‘ä»¬çœ‹ä¸€ä¸‹ç†ŸçŸ¥çš„emojiè¡¨ç°ï¼š

```js
'ğŸ˜'.length;
// 2
```

JavaScriptå°†emojiè§£é‡Šä¸ºä¸¤ä¸ªå­—ç¬¦çš„åŸå› æ˜¯UTF-16å°†emojisï¼ˆä»¥åŠå…¶ä»–ä¸å¯»å¸¸çš„å­—ç¬¦ï¼‰è¡¨ç¤ºä¸ºä¸¤ä¸ªä»£ç†é¡¹çš„ç»„åˆã€‚æˆ‘ä»¬çš„emojiç”¨å­—ç¬¦'\uD83D'å’Œ'\uDE0E'ç¼–ç ã€‚ä½†æ˜¯å¦‚æœè¯•å›¾å•ç‹¬ç¼–å†™è¿™æ ·ä¸€ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚'\uD83D'ï¼Œåˆ™ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ— æ•ˆçš„æ–‡æœ¬å­—ç¬¦ä¸²ã€‚åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œè¿™äº›å­—ç¬¦å°†æ›¿æ¢ä¸ºç‰¹æ®Šå­—ç¬¦ï¼š

```js
JSON.stringify('\uD83D');
// '"ï¿½"'
```

ç°åœ¨åœ¨å­—ç¬¦ä»£ç ä¹‹å‰æ’å…¥è½¬ä¹‰å­—ç¬¦ï¼Œç»“æœä»æ˜¯å¯è¯»ä¸”æœ‰æ•ˆçš„UTF-8/UTF-16ä»£ç ï¼š

```js
JSON.stringify('\uD83D');
// '"\\ud83d"'
```

### Array.prototype.sort() æ›´åŠ ç¨³å®š

ä¹‹å‰ï¼Œè§„èŒƒå…è®¸ä¸ç¨³å®šçš„æ’åºç®—æ³•ï¼Œå¦‚å¿«é€Ÿæ’åºã€‚

```js
let array = [
  {a: 1, b: 2},
  {a: 2, b: 2},
  {a: 1, b: 3},
  {a: 2, b: 4},
  {a: 5, b: 3}
];
array.sort((a, b) => a.a - b.a);
// [{a: 1, b: 2}, {a: 1, b: 3}...] / [{a: 1, b: 3}, {a: 1, b: 2}...]
```

åœ¨ä¹‹å‰çš„æ’åºä¸­ï¼Œå¯èƒ½å‡ºç°[{a: 1, b: 2}, {a: 1, b: 3}...]ã€[{a: 1, b: 3}, {a: 1, b: 2}...]ç­‰å¤šç§æƒ…å†µã€‚

ç°åœ¨æ‰€æœ‰ä¸»æµæµè§ˆå™¨éƒ½ä½¿ç”¨ç¨³å®šçš„æ’åºç®—æ³•ã€‚å®é™…ä¸Šï¼Œè¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œå¹¶åœ¨ç»™å®šçš„é”®ä¸Šå¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œé‚£ä¹ˆåˆ—è¡¨ä¸­çš„å…ƒç´ å°†ä¿æŒç›¸å¯¹äºå…·æœ‰ç›¸åŒé”®çš„å…¶ä»–å¯¹è±¡çš„ä½ç½®ã€‚

### Function.prototype.toString() é‡æ–°ä¿®è®¢

ä»ES2019å¼€å§‹ï¼ŒFunction.prototype.toString()å°†ä»å¤´åˆ°å°¾è¿”å›æºä»£ç ä¸­çš„å®é™…æ–‡æœ¬ç‰‡æ®µã€‚è¿™æ„å‘³ç€è¿˜å°†è¿”å›æ³¨é‡Šã€ç©ºæ ¼å’Œè¯­æ³•è¯¦ç»†ä¿¡æ¯ã€‚

```function /*a comment*/ foo() {}```

ä¹‹å‰ï¼ŒFunction.prototype.toString()åªä¼šè¿”å›äº†å‡½æ•°çš„ä¸»ä½“ï¼Œä½†æ²¡æœ‰æ³¨é‡Šå’Œç©ºæ ¼ã€‚

```js
foo.toString();
// 'function foo() {}'
```

ä½†ç°åœ¨ï¼Œå‡½æ•°è¿”å›çš„ç»“æœä¸ç¼–å†™çš„ä¸€è‡´ã€‚

```js
foo.toString();
// 'function /* a comment  */ foo () {}'â€‹
```

## ES2020  (ES11)

æœ¬ç¬”è®°æ˜¯æ ¹æ®[æ˜é‡‘](https://juejin.im/post/6844904154213662727)çš„ä¸€ç¯‡æ–‡ç« æ¥è¿›è¡Œæ•´ç†å­¦ä¹ çš„

### String.prototype.matchAll

String.prototype.matchAllæ˜¯ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œç”¨äºè·å–ç‰¹å®šæ­£åˆ™è¡¨è¾¾å¼çš„æ‰€æœ‰åŒ¹é…é¡¹ï¼ˆåŒ…æ‹¬æ•è·ç»„)

è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹

```js
const test = "climbing, oranges, jumping, flying, carrot";
```

ç›®æ ‡æ˜¯è·å–æ‰€æœ‰ä»¥ingç»“å°¾çš„å•è¯ï¼Œå¹¶ä¸”è¿”å›ä»–ä»¬å»æ‰ingçš„åŠ¨åè¯æ ¼å¼

```String.prototype.matchAll``` è¿™å°†ä½¿æˆ‘ä»¬çš„ç”Ÿæ´»æ›´åŠ è½»æ¾ï¼Œå¹¶æä¾›ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆæ¥æ”¯æŒæ•è·ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯è¿­ä»£çš„æ•°ç»„ï¼Œè¯¥æ•°ç»„å¯ä»¥æ‰©å±•ä¸ºæ•°ç»„ã€‚

```js
const test = "climbing, oranges, jumping, flying, carrot";

const regex = /(([a-z]*))ing/g;

const matches = [...test.matchAll(regex)];

const result = matches.map(match => match[1]);

console.log(matches);
/**
 [
  [
    'climbing',
    'climb',
    'climb',
    index: 0,
    input: 'climbing, oranges, jumping, flying, carrot',
    groups: undefined
  ],
  [
    'jumping',
    'jump',
    'jump',
    index: 19,
    input: 'climbing, oranges, jumping, flying, carrot',
    groups: undefined
  ],
  [
    'flying',
    'fly',
    'fly',
    index: 28,
    input: 'climbing, oranges, jumping, flying, carrot',
    groups: undefined
  ]
]
 */
console.log(result);
// ["climb", "jump", "fly"]

```

### åŠ¨æ€importï¼ˆï¼‰ (æ²¡çœ‹æ‡‚æ²¡çœ‹æ‡‚æ²¡çœ‹æ‡‚)

åŠ¨æ€å¯¼å…¥è¯­æ³•å…è®¸æˆ‘ä»¬å°†importä½œä¸ºèƒ½å¤Ÿè¿”å›promiseçš„å‡½æ•°è¿›è¡Œè°ƒç”¨ã€‚è¿™å¯¹äºåœ¨ä»£ç è¿è¡Œæ—¶åŠ¨æ€åŠ è½½æ¨¡å—ç‰¹åˆ«æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³åŸºäºä»£ç ä¸­çš„æŸäº›é€»è¾‘æ¥åŠ è½½æŸä¸ªç»„ä»¶æˆ–æ¨¡å—ã€‚

```js
// JavaScript for side panel is loaded
  const sidePanel = await import("components/SidePanel");
  sidePanel.open()
```

è¿˜æ”¯æŒæ’å€¼:

```js
async function openSidePanel(type = "desktop") {
    // JavaScript for desktop side panel is loaded
    const sidePanel = await import(`components/${type}/SidePanel`);
    sidePanel.open();
}
```

è¿™ä¸ªæ–°åŠŸèƒ½å¢å¼ºäº†æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚æˆ‘ä»¬ä¸å¿…é¢„å…ˆåŠ è½½æ‰€æœ‰çš„JavaScriptã€‚åŠ¨æ€å¯¼å…¥ä½¿æˆ‘ä»¬èƒ½å¤Ÿä»…åŠ è½½æ‰€éœ€æ•°é‡çš„JSæ§ä»¶ï¼Œæ€§èƒ½ä¸Šæå¤§æå‡ã€‚

### BigInt

å¯ä»¥ç”¨åœ¨ä¸€ä¸ªæ•´æ•°å­—é¢é‡åé¢åŠ  n çš„æ–¹å¼å®šä¹‰ä¸€ä¸ª BigInt ï¼Œå¦‚ï¼š10nï¼Œæˆ–è€…è°ƒç”¨å‡½æ•°BigInt()ã€‚

- ä½¿ç”¨ typeof æµ‹è¯•æ—¶ï¼Œ BigInt å¯¹è±¡è¿”å› "bigint"
- ä½¿ç”¨ Object åŒ…è£…åï¼Œ BigInt è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ™®é€š "object"

avaScriptå¯ä»¥å¤„ç†çš„æœ€å¤§æ•°é‡ä¸º2^53ã€‚å°±æ˜¯è¿™æ ·9007199254740991ï¼Œæˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨æ›´å¥½è®°ä¸€ç‚¹çš„Number.MAX_SAFE_INTEGERã€‚

å½“ä½ æ•°å­—è¶…è¿‡MAX_SAFE_INTEGERæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

```js
console.log(Number.MAX_SAFE_INTEGER); // 9007199254740991
console.log(Number.MAX_SAFE_INTEGER + 1); // 9007199254740992
console.log(Number.MAX_SAFE_INTEGER + 2); // 9007199254740992 - wut
console.log(Number.MAX_SAFE_INTEGER + 3); // 9007199254740994 - WUT
```

æ‰€ä»¥åŠ 2æˆ‘ä»¬è¦è¿™æ ·å†™

```js
BigInt(Number.MAX_SAFE_INTEGER) + 2n
```

ä»¥ä¸‹æ“ä½œç¬¦å¯ä»¥å’Œ BigInt ä¸€èµ·ä½¿ç”¨ï¼š +ã€`*`ã€`-`ã€`**`ã€`%` ã€‚é™¤ >>> ï¼ˆæ— ç¬¦å·å³ç§»ï¼‰ä¹‹å¤–çš„ ä½æ“ä½œ ä¹Ÿå¯ä»¥æ”¯æŒã€‚å› ä¸º BigInt éƒ½æ˜¯æœ‰ç¬¦å·çš„ï¼Œ >>> ï¼ˆæ— ç¬¦å·å³ç§»ï¼‰ä¸èƒ½ç”¨äº BigIntã€‚ä¸ºäº†å…¼å®¹ asm.js ï¼ŒBigInt ä¸æ”¯æŒå•ç›® (+) è¿ç®—ç¬¦ã€‚

æ³¨æ„ï¼š å½“ä½¿ç”¨ BigInt æ—¶ï¼Œå¸¦å°æ•°çš„è¿ç®—ä¼šè¢«å–æ•´ã€‚

BigInt å’Œ Number ä¸æ˜¯ä¸¥æ ¼ç›¸ç­‰çš„ï¼Œä½†æ˜¯å®½æ¾ç›¸ç­‰çš„ã€‚

```js
1 == 1n; --> true
1 === 1n --> false
```

Number å’Œ BigInt å¯ä»¥è¿›è¡Œæ¯”è¾ƒã€‚

```js
1n < 2 --> true
```

### Promise.allSettled

å‡è®¾æ‚¨æ­£åœ¨å‚åŠ è€ƒè¯•ã€‚æ”¶åˆ°ç»“æœåï¼Œæ‚¨å‘ç°æ‚¨æ­£ç¡®å›ç­”äº†99ï¼…çš„é—®é¢˜ã€‚åœ¨å¤§å¤šæ•°ç”Ÿæ´»é¢†åŸŸä¸­ï¼Œæ‚¨éƒ½ä¼šå……æ»¡å¯¹èƒœåˆ©çš„å¸Œæœ›ã€‚ä¸è¿‡ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨ä¾ç„¶ä¼šåœ¨å¾—åˆ†ä¸­æ”¶åˆ°ä¸€ä¸ªå¤§çº¢è‰²çš„å‰ï¼Œå‘Šè¯‰æ‚¨æ‚¨å¤±è´¥äº†ã€‚

è¿™å°±æ˜¯Promise.allçš„å·¥ä½œæ–¹å¼ã€‚Promise.allæ¥å—ä¸€ç³»åˆ—æ‰¿è¯ºï¼Œå¹¶åŒæ—¶è·å–å…¶ç»“æœã€‚å¦‚æœå®ƒä»¬å…¨éƒ¨æˆåŠŸï¼Œæ‚¨çš„Promise.allæˆåŠŸã€‚å¦‚æœä¸€é¡¹æˆ–å¤šé¡¹å¤±è´¥ï¼Œæ‚¨çš„Promiseå°±ä¼šè¢«rejectã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦è¿™ç§å¤„ç†æ–¹å¼ï¼Œä½†äº‹å®ä¸Šå¹¶ä¸æ€»æ˜¯è¿™æ ·ã€‚

ES2020çš„Promise.allSettledåœ¨è€ƒè¯•æ–¹é¢å¯è¦æ¯”Promise.allå¥½å¾—å¤šã€‚å®ƒå°†ä½¿æ‚¨è½»æ‹ä¸€ä¸‹ï¼Œå¹¶å‘Šè¯‰æ‚¨ä¸è¦æ‹…å¿ƒ1ï¼…çš„rejectã€‚
å½“Promiseå‡ºç°æ—¶ï¼Œæ— è®ºå®ƒè¢«è®¤ä¸ºæ˜¯resolveæˆ–rejectã€‚Promise.allSettledå…è®¸æˆ‘ä»¬ä¼ é€’ä¸€ç³»åˆ—çš„Promiseï¼Œè¿™äº›Promiseå°†åœ¨å…¨éƒ¨ç»“æŸåï¼ŒPromiseçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªè£…æ»¡Promiseç»“æœçš„æ•°ç»„ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```js
const promises = [
  fetch('/api1'),
  fetch('/api2'),
  fetch('/api3'),
];

Promise.allSettled(promises).
  then((results) => results.forEach((result) => console.log(result.status)));

// "fulfilled"
// "fulfilled"
// "rejected"
```

### globalThis

globalThis æ˜¯ä¸€ä¸ªå…¨æ–°çš„æ ‡å‡†æ–¹æ³•ç”¨æ¥è·å–å…¨å±€ this ã€‚ä¹‹å‰å¼€å‘è€…ä¼šé€šè¿‡å¦‚ä¸‹çš„ä¸€äº›æ–¹æ³•è·å–ï¼š

- å…¨å±€å˜é‡ windowï¼šæ˜¯ä¸€ä¸ªç»å…¸çš„è·å–å…¨å±€å¯¹è±¡çš„æ–¹æ³•ã€‚ä½†æ˜¯å®ƒåœ¨ Node.js å’Œ Web Workers ä¸­å¹¶ä¸èƒ½ä½¿ç”¨
- å…¨å±€å˜é‡ selfï¼šé€šå¸¸åªåœ¨ Web Workers å’Œæµè§ˆå™¨ä¸­ç”Ÿæ•ˆã€‚ä½†æ˜¯å®ƒä¸æ”¯æŒ Node.jsã€‚ä¸€äº›äººä¼šé€šè¿‡åˆ¤æ–­ self - æ˜¯å¦å­˜åœ¨è¯†åˆ«ä»£ç æ˜¯å¦è¿è¡Œåœ¨ Web Workers å’Œæµè§ˆå™¨ä¸­
- å…¨å±€å˜é‡ globalï¼šåªåœ¨ Node.js ä¸­ç”Ÿæ•ˆ

ç”±äºJsçš„é€šç”¨æ€§ï¼Œç›¸åŒçš„JavaScriptä»£ç å¯ä»¥åœ¨NodeJSçš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸Šè¿è¡Œã€‚è¿™æå‡ºäº†ä¸€ç³»åˆ—ç‰¹æ®Šçš„æŒ‘æˆ˜ã€‚
ä¸€ä¸ªæ˜¯å…¨å±€å¯¹è±¡ï¼Œå¯ä»¥ä»ä»»ä½•è¿è¡Œçš„ä»£ç æ®µä¸­è®¿é—®å®ƒã€‚windowåœ¨æµè§ˆå™¨ä¸­ï¼Œä½†globalåœ¨Nodeä¸­ã€‚ç¼–å†™è®¿é—®æ­¤å…¨å±€å¯¹è±¡çš„é€šç”¨ä»£ç ä¾èµ–äºä¸€äº›æ¡ä»¶é€»è¾‘ï¼Œè¿™äº›æ¡ä»¶é€»è¾‘å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼ˆè’™ä½çœ¼ç›ï¼‰ã€‚

```js
(typeof window !== "undefined"
? window
: (typeof process === 'object' &&
   typeof require === 'function' &&
   typeof global === 'object')
    ? global
    : this);
```

å€¼å¾—åº†å¹¸çš„æ˜¯ï¼ŒES2020å¸¦æ¥äº†globalThiså…¨å±€å˜é‡ã€‚ç°åœ¨å¯ä»¥æ”¾æ¾çš„ä¸å»è€ƒè™‘windowæˆ–globalè€Œç»Ÿä¸€å‰ç«¯æˆ–åç«¯ä»£ç ã€‚

### for-inçš„å­¦é—®

```for (x in obj) ...```  æ˜¯åœ¨å¾ˆå¤šæ—¶å€™éƒ½è¶…çº§æœ‰ç”¨çš„è¯­æ³•ï¼Œä¸»è¦æ˜¯éå†å¯¹è±¡çš„ ```key``` å€¼ã€‚

### å¯é€‰é“¾æ“ä½œç¬¦ï¼ˆOptional Chainingï¼‰

å½“æ£€æŸ¥åµŒå¥—å¯¹è±¡å†…éƒ¨çš„å±æ€§æ—¶ï¼Œé€šå¸¸å¿…é¡»æ£€æŸ¥ä¸­é—´å¯¹è±¡çš„å­˜åœ¨ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```js
const test = {
  name: "foo",
  age: 25,
  address: {
    number: 44,
    street: "Sesame Street",
    city: {
      name: "Fake City",
      lat: 40,
      lon: 74
    }
  }
}

// when we want to check for the name of the city
if (test.address.city.name) {
  console.log("City name exists!");
}

// City Name exists!
```

```js
const test = {
  name: "foo",
  age: 25,
  address: {
    number: 44,
    street: "Sesame Street"
  }
}

if (test.address.city.name) {
  console.log("City name exists!");
}

// TypeError: Cannot read property 'name' of undefined
```

æˆ‘ä»¬çš„ä»£ç å·²ç»æŠ¥é”™äº†ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¯•å›¾è®¿é—®nameçš„test.address.cityï¼Œä½†æ˜¯è¿™æ˜¯ä¸€ä¸ªundefinedã€‚å½“å°è¯•è¯»å–undefinedä¸Šçš„å±æ€§æ—¶TypeErrorè‚¯å®šä¼šæŠ›å‡ºä»¥ä¸Šå†…å®¹ã€‚é‚£æˆ‘ä»¬è¯¥å¦‚ä½•è§£å†³ï¼Ÿåœ¨ä¹‹å‰è®¸å¤šJavaScriptä»£ç ä¸­ï¼Œæ‚¨å°†çœ‹åˆ°ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š

```js

const test = {
  name: "foo",
  age: 25,
  address: {
    number: 44,
    street: "Sesame Street"
  },
  
}

if (test.address && test.address.city && test.address.city.name) {
  console.log("City name exists!");
}

// no TypeError thrown!
```

æˆ‘ä»¬çš„ä»£ç ç°åœ¨å¯ä»¥è¿è¡Œäº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¾—ä¸åœ¨å‡ºbugé‚£å„¿å†™å¾ˆå¤šä»£ç æ¥è§£å†³é—®é¢˜ã€‚æˆ‘ä»¬æŒ‰ç†æ¥è¯´å¯ä»¥åšå¾—æ›´å¥½ï¼ES2020çš„å¯é€‰é“¾æ¥è¿ç®—ç¬¦è®©æˆ‘ä»¬å¯ä»¥æ–°åŠ ä¸€ä¸ª ```?``` (å¯é€‰é“¾æ“ä½œç¬¦è¯­æ³• ```?.``` )ï¼Œæ£€æŸ¥å¯¹è±¡æ·±å¤„æ˜¯å¦å­˜åœ¨å€¼ã€‚è¿™æ˜¯ä½¿ç”¨å¯é€‰é“¾æ¥è¿ç®—ç¬¦é‡å†™çš„ä¸Šè¿°ç¤ºä¾‹ï¼š

```js
const test = {
  name: "foo",
  age: 25,
  address: {
    number: 44,
    street: "Sesame Street"
  },
  
}

// much cleaner.
if (test?.address?.city?.name) {//å¦‚æœæœ‰nameå€¼è¿”å›çš„å°±æ˜¯nameå€¼
  console.log("City name exists!");
}

// no TypeError thrown!
```

çœ‹èµ·æ¥ä¸é”™ã€‚æˆ‘ä»¬å°†ååˆ†é•¿çš„&&é“¾ï¼Œæµ“ç¼©ä¸ºæ›´åŠ ç®€æ´æ˜“è¯»çš„å¯é€‰é“¾è¿ç®—ç¬¦ã€‚å¦‚æœé“¾ä¸­çš„ä»»ä½•å€¼æ˜¯nullæˆ–è€… undefinedï¼Œåˆ™è¡¨è¾¾å¼ä»…è¿”å›undefinedã€‚å¦‚æœæœ‰nameå€¼è¿”å›çš„å°±æ˜¯nameå€¼

```js
const nestedProp = obj?.['prop' + 'Name']; // computed properties

const result = obj.customMethod?.(); // functions

const arrayItem = arr?.[42]; // arrays
```

```js
let arr = [1,2,3];
console.log(arr?.[3]);//undefined
console.log(arr?.[0]);//1
```

### ç©ºä½åˆå¹¶è¿ç®—ç¬¦ï¼ˆNullish coalescing Operator)

ç©ºä½åˆå¹¶è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„åç§°ï¼Œå¬èµ·æ¥å¾ˆèŠ±å“¨ã€‚æ­¤åŠŸèƒ½ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºnullæˆ–undefinedï¼Œå¦‚æœæ˜¯ï¼Œåˆ™é»˜è®¤ä¸ºå¦ä¸€ä¸ªå€¼ï¼Œä»…æ­¤è€Œå·²ã€‚

ä¸ºä»€ä¹ˆè¿™æœ‰ç”¨ï¼Ÿè®©æˆ‘ä»¬å‡è®¾ä¸€ä¸‹ï¼Œä½ çš„JavaScriptä¸­æœ‰äº”ä¸ªè™šå€¼ã€‚

- null
- undefined
- ç©ºå­—ç¬¦ä¸² ""
- 0
- æ²¡æœ‰æ•°å­—-NaN

æˆ‘ä»¬å¯èƒ½æœ‰ä¸€äº›è¦æ£€æŸ¥æ•°å€¼çš„ä»£ç ã€‚æˆ‘ä»¬æƒ³ä¸ºçƒé˜Ÿä¸­çš„çƒå‘˜åˆ†é…ä¸€ä¸ªå°é˜Ÿå·ç ã€‚å¦‚æœä»–ä»¬å·²ç»æœ‰å°é˜Ÿå·ç ï¼Œæˆ‘ä»¬å°†ä¿ç•™è¯¥å·ç ã€‚å¦åˆ™ï¼Œæˆ‘ç»™ä»–ä»¬ä¸€ä¸ªå«"unssigned"çš„å€¼ã€‚

```js
const person = {
  name: "Dave",
  age: 30,
  squadNumber: 0
};

const squadNumber = person.squadNumber || "unassigned";

console.log(`${person.name}s squad number is ${squadNumber}`);


// "Daves squad number is unassigned"
```

è¿™æ˜¯ä¸å¯¹çš„ã€‚Daveå·²ç»ä¸ºçƒé˜Ÿæ•ˆåŠ›äº†å¤šå¹´ã€‚æˆ‘ä»¬çš„ä»£ç æœ‰ä¸€ä¸ªé”™è¯¯ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ˜¯å› ä¸º0ï¼Œå¯¼è‡´æˆ‘ä»¬falseæ¡ä»¶çš„||è¢«è°ƒç”¨ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå¯¹ç»“æœå€¼çš„æ£€æŸ¥å­˜åœ¨é—®é¢˜ã€‚æ‚¨å½“ç„¶å¯ä»¥é€šè¿‡ä»¥ä¸‹æ“ä½œè§£å†³æ­¤é—®é¢˜ï¼š

```js
const person = {
  name: "Dave",
  age: 30,
  squadNumber: 0
};

const squadNumber = person.squadNumber >= 0 ? person.squadNumber : "unassigned";

console.log(`${person.name}s squad number is ${squadNumber}`);


// "Daves squad number is 0"
```

è¿™æ˜¯ä¸€ä¸ªè¿˜å¯ä»¥çš„è§£å†³æ–¹æ¡ˆï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç©ºä½åˆå¹¶è¿ç®—ç¬¦æ¥è§£å†³ã€‚

è¿ç®—ç¬¦````??``` å¯ä»¥æ›´å¥½åœ°ç¡®ä¿æˆ‘ä»¬çš„å€¼æ˜¯nullæˆ–undefinedã€‚

```js
const person = {
  name: "Dave",
  age: 30,
  squadNumber: 0
};

// Nullish Coalescing Operator
// If person.squadNumber is null or undefined
// set squadNumber to unassigned
const squadNumber = person.squadNumber ?? "unassigned";

console.log(`${person.name}s squad number is ${squadNumber}`);


// "Daves squad number is 0"
```

### import.meta (æ²¡çœ‹æ‡‚)

import.metaæ˜¯ä¸€ä¸ªç»™JavaScriptæ¨¡å—æš´éœ²ç‰¹å®šä¸Šä¸‹æ–‡çš„å…ƒæ•°æ®å±æ€§çš„å¯¹è±¡ã€‚å®ƒåŒ…å«äº†è¿™ä¸ªæ¨¡å—çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´è¿™ä¸ªæ¨¡å—çš„URLã€‚

å¦‚æœæ‚¨ç†Ÿæ‚‰Nodeï¼Œåˆ™å¯ä»¥é€šè¿‡__dirnameæˆ–__filenameå±æ€§ä¸CommonJSä¸€èµ·ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚

ä¸‹é¢çš„nodeä»£ç çœ‹ä¸æ‡‚  è¿˜æ²¡å­¦nodejs

```js
const fs = require("fs");
const path = require("path");
// resolves data.bin relative to the directory of this module
const bytes = fs.readFileSync(path.resolve(__dirname, "data.bin"));
```

é‚£æµè§ˆå™¨å‘¢ï¼Ÿè¿™é‡Œimport.metaå°†ä¼šå˜å¾—æœ‰ç”¨ã€‚å¦‚æœè¦ä»æµè§ˆå™¨ä¸­è¿è¡Œçš„JavaScriptæ¨¡å—å¯¼å…¥ç›¸å¯¹è·¯å¾„ï¼Œåˆ™å¯ä»¥è®©import.metaè¿™æ ·åšï¼š

```js
// Will import cool-image relative to where this module is running.
const response = await fetch(new URL("../cool-image.jpg", import.meta.url));
```

æ­¤åŠŸèƒ½å¯¹å¼€å‘ç¬¬ä¸‰æ–¹åº“çš„ä½œè€…é‚£å¯æ˜¯éå¸¸æœ‰ç”¨äº†ï¼Œå› ä¸ºä»–ä»¬ä¸çŸ¥é“ä»–ä»¬çš„ä»£ç å°†åœ¨ä»€ä¹ˆåœ°æ–¹ä»¥ä»€ä¹ˆæ–¹å¼è¿è¡Œçš„ã€‚
